pipeline {
    agent any
    environment {
        PATH = "/opt/maven3.6.3/bin:$PATH"
    }
    stages{
        stage("Git"){
            steps{
                git 'https://github.com/Suhana09/DevOps-Demo-WebApp.git'
            }
        }
        stage("Blazemeter") {
            steps {
                //blazeMeterTest credentialsId: 'blazemeter', testId: '8578936.taurus', workspaceId: '667789'
            }
        }
        stage("Sanity test") {
            steps {
                sh "mvn test -f Acceptancetest/pom.xml"
                publishHTML([allowMissing: false, alwaysLinkToLastBuild: false, keepAll: false, reportDir: '\\Acceptancetest\\target\\surefire-reports', reportFiles: 'index.html', reportName: 'Sanity Test Report', reportTitles: ''])
            }
        }
    }
}
